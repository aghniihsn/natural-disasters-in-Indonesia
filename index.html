<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>üö® Peta Sebaran Bencana Sumatera 2025 - Data BNPB</title>
    <meta name="description" content="Dashboard Monitoring Bencana Sumatera. Sumber: GIS BNPB. 990 Korban Jiwa, 800rb Pengungsi.">
    <meta property="og:title" content="üö® Monitoring Bencana Sumatera 2025 (Data BNPB)">
    <meta property="og:description" content="Peta sebaran titik banjir dan longsor di Aceh, Sumut, dan Sumbar.">
    <meta property="og:image" content="https://akcdn.detik.net.id/visual/2024/12/12/banjir-aceh_169.jpeg">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { background-color: #f8fafc; font-family: 'Segoe UI', sans-serif; color: #334155; }
        
        .fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 20px rgba(148, 163, 184, 0.15);
        }
        
        .marquee-container { overflow: hidden; white-space: nowrap; position: relative; }
        .marquee-content { display: inline-block; animation: marquee 35s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        #map { height: 100vh; width: 100%; z-index: 0; }
        .hidden-section { display: none; }
        
        .leaflet-popup-content-wrapper { background: rgba(255, 255, 255, 0.95); border-radius: 12px; }
        .leaflet-popup-tip { background: rgba(255, 255, 255, 0.95); }
    </style>
</head>
<body class="overflow-x-hidden">

    <section id="dashboard-view" class="min-h-screen relative flex flex-col items-center justify-center p-4">
        
        <div class="absolute inset-0 z-0 opacity-10 bg-[url('https://upload.wikimedia.org/wikipedia/commons/b/bb/Indonesia_Sumatra_location_map.svg')] bg-cover bg-center"></div>
        <div class="absolute inset-0 z-0 bg-gradient-to-b from-white/80 via-white/50 to-slate-100"></div>

        <div class="z-10 w-full max-w-5xl fade-in space-y-6">
            
            <div class="text-center space-y-3">
                <div class="inline-flex items-center gap-2 bg-orange-100 border border-orange-200 text-orange-700 px-4 py-1.5 rounded-full text-xs font-bold tracking-widest uppercase shadow-sm">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-orange-500"></span>
                    </span>
                    Data GIS BNPB Terintegrasi
                </div>
                
                <h1 class="text-4xl md:text-6xl font-black tracking-tight text-slate-800 leading-tight">
                    SITUATION REPORT <br><span class="text-red-600">BENCANA SUMATERA</span>
                </h1>
                
                <div class="flex justify-center items-center gap-2 text-sm text-slate-500 font-medium">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/BNPB_Indonesia_Logo.svg/1200px-BNPB_Indonesia_Logo.svg.png" class="h-6 w-auto" alt="Logo BNPB">
                    <span>Sumber Data: gis.bnpb.go.id (Update 12/12/2025)</span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mt-4">
                <div class="glass-card p-6 rounded-2xl border-t-4 border-red-500 text-center hover:scale-[1.02] transition">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider">Korban Meninggal</h3>
                    <div class="text-5xl font-black text-slate-800 my-2">990</div>
                    <span class="bg-red-100 text-red-600 text-[10px] px-2 py-1 rounded-md font-bold">+45 Hari ini</span>
                </div>
                
                <div class="glass-card p-6 rounded-2xl border-t-4 border-orange-400 text-center hover:scale-[1.02] transition">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider">Dalam Pencarian</h3>
                    <div class="text-5xl font-black text-slate-800 my-2">222</div>
                    <span class="bg-orange-100 text-orange-600 text-[10px] px-2 py-1 rounded-md font-bold">Tim SAR Bergerak</span>
                </div>

                <div class="glass-card p-6 rounded-2xl border-t-4 border-blue-500 text-center hover:scale-[1.02] transition">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider">Total Pengungsi</h3>
                    <div class="text-5xl font-black text-slate-800 my-2">800<span class="text-2xl text-slate-400">rb</span></div>
                    <span class="bg-blue-100 text-blue-600 text-[10px] px-2 py-1 rounded-md font-bold">52 Kab/Kota</span>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-5">
                <div class="glass-card p-5 rounded-xl col-span-1 lg:col-span-1">
                    <h4 class="font-bold text-slate-700 text-sm mb-3 flex items-center gap-2">
                        <i class="fa-solid fa-location-dot text-red-500"></i> Fokus Area Terdampak
                    </h4>
                    <ul class="space-y-3 text-sm">
                        <li class="flex justify-between items-center pb-2 border-b border-slate-100">
                            <span class="text-slate-600">Aceh Tamiang</span>
                            <span class="font-bold text-red-600 text-xs bg-red-50 px-2 py-1 rounded">Banjir Luapan</span>
                        </li>
                        <li class="flex justify-between items-center pb-2 border-b border-slate-100">
                            <span class="text-slate-600">Deli Serdang (Sumut)</span>
                            <span class="font-bold text-orange-600 text-xs bg-orange-50 px-2 py-1 rounded">Longsor</span>
                        </li>
                        <li class="flex justify-between items-center">
                            <span class="text-slate-600">Agam/Tanah Datar</span>
                            <span class="font-bold text-slate-600 text-xs bg-slate-100 px-2 py-1 rounded">Lahar Dingin</span>
                        </li>
                    </ul>
                </div>

                <div class="glass-card p-5 rounded-xl col-span-1 lg:col-span-2 flex flex-col justify-center bg-white">
                    <h4 class="font-bold text-slate-700 text-sm mb-2"><i class="fa-solid fa-triangle-exclamation text-yellow-500 mr-1"></i> Kerusakan Infrastruktur</h4>
                    <div class="bg-slate-50 border border-slate-100 rounded-lg p-3 overflow-hidden relative h-12 flex items-center">
                        <div class="marquee-container w-full">
                            <div class="marquee-content text-sm text-slate-600 font-semibold font-mono">
                                <span class="mx-6">üåâ 498 Jembatan Putus</span>
                                <span class="mx-6">üè• 219 Puskesmas/RS Rusak</span>
                                <span class="mx-6">üè´ 581 Sekolah Terendam</span>
                                <span class="mx-6">üïå 434 Rumah Ibadah Rusak</span>
                                <span class="mx-6">üè† 12.500 Rumah Hanyut</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button onclick="showMap()" class="w-full py-4 mt-2 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl shadow-lg transition-all transform hover:-translate-y-1 flex items-center justify-center gap-3 group cursor-pointer">
                <span>LIHAT PETA SEBARAN (GIS)</span>
                <i class="fa-solid fa-map-location-dot group-hover:scale-110 transition"></i>
            </button>
        </div>
    </section>

    <section id="map-view" class="h-screen w-screen relative hidden-section bg-slate-100">
        
        <div class="absolute top-4 left-4 right-4 z-[1000] flex justify-between items-start pointer-events-none">
            <button onclick="hideMap()" class="pointer-events-auto bg-white hover:bg-slate-50 text-slate-700 px-4 py-2.5 rounded-lg shadow-xl border border-slate-200 flex items-center gap-2 font-bold text-sm transition">
                <i class="fa-solid fa-arrow-left"></i> Dashboard
            </button>

            <div class="pointer-events-auto bg-white/95 p-4 rounded-xl shadow-2xl border border-slate-100 w-72">
                <div class="flex items-center gap-2 mb-2">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/BNPB_Indonesia_Logo.svg/1200px-BNPB_Indonesia_Logo.svg.png" class="h-4 w-auto">
                    <h4 class="font-bold text-slate-800 text-xs uppercase">Layer Bencana BNPB</h4>
                </div>
                <div class="space-y-2.5 text-xs text-slate-600">
                    <div class="flex items-center gap-3 bg-slate-50 p-1.5 rounded border border-slate-100">
                        <span class="w-3 h-3 rounded-full bg-blue-500 border-2 border-white shadow"></span>
                        <div>
                            <p class="font-bold text-slate-800">Banjir (Aceh Tamiang)</p>
                            <p class="text-[10px]">Status: Siaga 1</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 bg-slate-50 p-1.5 rounded border border-slate-100">
                        <span class="w-3 h-3 rounded-full bg-orange-500 border-2 border-white shadow"></span>
                        <div>
                            <p class="font-bold text-slate-800">Longsor (Deli Serdang)</p>
                            <p class="text-[10px]">Akses Jalan Putus</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 bg-slate-50 p-1.5 rounded border border-slate-100">
                        <span class="w-3 h-3 rounded-full bg-red-600 border-2 border-white shadow"></span>
                        <div>
                            <p class="font-bold text-slate-800">Galodo (Sumatera Barat)</p>
                            <p class="text-[10px]">Zona Merah</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="map"></div>
    </section>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map;

        function showMap() {
            document.getElementById('dashboard-view').style.display = 'none';
            document.getElementById('map-view').style.display = 'block';
            if (!map) initMap();
        }

        function hideMap() {
            document.getElementById('map-view').style.display = 'none';
            document.getElementById('dashboard-view').style.display = 'flex';
        }

        function initMap() {
            var mapCenter = [3.8, 98.5]; 
            
            map = L.map('map', { zoomControl: false }).setView(mapCenter, 8);
            L.control.zoom({ position: 'bottomright' }).addTo(map);

            L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                attribution: '&copy; OpenStreetMap &copy; CARTO',
                maxZoom: 19
            }).addTo(map);

            var bnpbData = [
                {
                    type: "Banjir",
                    coords: [4.294, 98.058],
                    location: "Kab. Aceh Tamiang",
                    stats: "238.000 Pengungsi",
                    desc: "Luapan Sungai Tamiang akibat deforestasi hulu.",
                    color: "#3b82f6"
                },
                {
                    type: "Longsor",
                    coords: [3.292, 98.561],
                    location: "Sibolangit, Deli Serdang",
                    stats: "Jalan Nasional Putus",
                    desc: "Tebing setinggi 20m longsor menimpa kendaraan.",
                    color: "#f97316" 
                },
                {
                    type: "Banjir Lahar",
                    coords: [-0.472, 100.415],
                    location: "Agam & Tanah Datar",
                    stats: "240 Korban Jiwa",
                    desc: "Banjir bandang lahar dingin Gunung Marapi.",
                    color: "#dc2626" 
                }
            ];

            bnpbData.forEach(data => {
                L.circleMarker(data.coords, {
                    radius: 12,
                    fillColor: data.color,
                    color: "#fff",
                    weight: 3,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map).bindPopup(`
                    <div style="min-width: 200px;">
                        <h4 style="margin:0; font-weight:bold; color:#1e293b; font-size:14px;">${data.location}</h4>
                        <span style="display:inline-block; background:${data.color}; color:white; font-size:10px; padding:2px 6px; border-radius:4px; margin:4px 0;">${data.type}</span>
                        <p style="margin:5px 0 0; font-size:12px; color:#64748b;">${data.desc}</p>
                        <hr style="border:0; border-top:1px solid #e2e8f0; margin:8px 0;">
                        <p style="margin:0; font-size:11px; font-weight:bold;">${data.stats}</p>
                    </div>
                `);

                var pulseIcon = L.divIcon({
                    className: 'pulse-icon',
                    html: `<div style="
                        width: 40px; height: 40px; 
                        background: ${data.color}; 
                        border-radius: 50%; 
                        opacity: 0.4; 
                        animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite;
                        transform: translate(-50%, -50%);">
                    </div>`,
                    iconSize: [0, 0] 
                });
                L.marker(data.coords, { icon: pulseIcon }).addTo(map);
            });
            
            var style = document.createElement('style');
            style.innerHTML = `
                @keyframes ping {
                    75%, 100% { transform: scale(2); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>